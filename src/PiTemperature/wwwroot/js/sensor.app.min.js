$(function(){var o=function(){function o(){}return o}(),e=function(){function e(){this.ScaleColor=new o}return e}(),r=function(){function o(o,e,r,i,t,n){this.Sensor=o,this.Name=ko.observable(e),this.MinValue=ko.observable(r),this.MaxValue=ko.observable(i),this.TicksInterval=ko.observable(t),this.FirstColor=ko.observable(n.FirstColor),this.FirstDivider=ko.observable(n.FirstDivider),this.SecondColor=ko.observable(n.SecondColor),this.SecondDivider=ko.observable(n.SecondDivider),this.ThirdColor=ko.observable(n.ThirdColor),this.ThirdDivider=ko.observable(n.ThirdDivider),this.LastColor=ko.observable(n.LastColor)}return o}(),i=function(){function o(){this.items=ko.observableArray([]),this.editItem=ko.observable(null),this.itemCount=ko.computed({owner:this,read:function(){if("undefined"==typeof this.items)return"";switch(this.items().length){case 0:return"There no temp sensors atached";default:return"There are "+this.items().length+" temp sensor(s) atached"}}}),this.getAll()}return o.prototype.getAll=function(){$.ajax({context:this,type:"get",url:"/api/Sensor",success:function(o){var e=$.map(o,function(o){return new r(o.Sensor,o.Name,o.MinValue,o.MaxValue,o.TicksInterval,o.ScaleColor)});t.items(e)}})},o.prototype.getItem=function(o){$.ajax({context:this,dataType:"json",url:"/api/Sensor/"+o.Sensor,data:null,success:function(e){o.Name(e.Name),o.MinValue(e.MinValue),o.MaxValue(e.MaxValue),o.TicksInterval(e.TicksInterval),o.FirstColor(e.ScaleColor.FirstColor),o.FirstDivider(e.ScaleColor.FirstDivider),o.SecondColor(e.ScaleColor.SecondColor),o.SecondDivider(e.ScaleColor.SecondDivider),o.ThirdColor(e.ScaleColor.ThirdColor),o.ThirdDivider(e.ScaleColor.ThirdDivider),o.LastColor(e.ScaleColor.LastColor)}})},o.prototype.saveItem=function(o){$.ajax({context:this,type:"PUT",contentType:"application/json",dataType:"json",url:"/api/Sensor/"+o.Sensor,data:this.convertItem(o),success:function(o){}})},o.prototype.convertItem=function(o){var r=new e;return r.Sensor=o.Sensor,r.Name=o.Name(),r.MinValue=o.MinValue(),r.MaxValue=o.MaxValue(),r.TicksInterval=o.TicksInterval(),r.ScaleColor.FirstColor=o.FirstColor(),r.ScaleColor.FirstDivider=o.FirstDivider(),r.ScaleColor.SecondColor=o.SecondColor(),r.ScaleColor.SecondDivider=o.SecondDivider(),r.ScaleColor.ThirdColor=o.ThirdColor(),r.ScaleColor.ThirdDivider=o.ThirdDivider(),r.ScaleColor.LastColor=o.LastColor(),ko.toJSON(r)},o.prototype.deleteItem=function(o){$.ajax({context:this,type:"DELETE",contentType:"application/json",dataType:"json",url:"/api/Sensor/"+o.Sensor,data:ko.toJSON(o),success:function(e){o.Name(e.Name),o.MinValue(e.MinValue),o.MaxValue(e.MaxValue),o.TicksInterval(e.TicksInterval),o.FirstColor(e.ScaleColor.FirstColor),o.FirstDivider(e.ScaleColor.FirstDivider),o.SecondColor(e.ScaleColor.SecondColor),o.SecondDivider(e.ScaleColor.SecondDivider),o.ThirdColor(e.ScaleColor.ThirdColor),o.ThirdDivider(e.ScaleColor.ThirdDivider),o.LastColor(e.ScaleColor.LastColor)}})},o}(),t=new i;ko.applyBindings(t),$("#editItem").on("shown.bs.modal",function(o){var e=$("#FirstColorPicker");e.colorpicker().on("changeColor",function(o){$("#FirstColorId").change()}),e=$("#SecondColorPicker"),e.colorpicker().on("changeColor",function(o){$("#SecondColorId").change()}),e=$("#ThirdColorPicker"),e.colorpicker().on("changeColor",function(o){$("#ThirdColorId").change()}),e=$("#LastColorPicker"),e.colorpicker().on("changeColor",function(o){$("#LastColorId").change()})})});